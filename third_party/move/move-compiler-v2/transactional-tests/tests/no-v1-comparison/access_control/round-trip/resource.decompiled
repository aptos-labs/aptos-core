//**** Cross-compiled for `move` syntax from `tests/no-v1-comparison/access_control/resource.move`

//# publish
module 0x42::test {
    struct Other has drop, key {
    }
    struct R has drop, key {
        value: bool,
    }
    fun init(p0: &signer) {
        let _v0 = R{value: true};
        move_to<R>(p0, _v0);
    }
    fun fail1(): bool
        acquires R
        reads Other
    {
        !*&borrow_global<R>(@0x1).value
    }
    fun fail2(): bool
        reads Other
    {
        !exists<R>(@0x1)
    }
    fun fail3(): bool
        acquires R
        reads R
        writes Other
    {
        let _v0 = move_from<R>(@0x1);
        !*&(&_v0).value
    }
    fun fail4(): bool
        acquires R
        reads R
        writes Other
    {
        let _v0 = &mut borrow_global_mut<R>(@0x1).value;
        *_v0 = false;
        false
    }
    fun fail5(): bool
        acquires R
        reads Other
    {
        fail_no_subsumes()
    }
    fun fail_no_subsumes(): bool
        acquires R
        reads R
    {
        *&borrow_global<R>(@0x1).value
    }
    fun ok1(): bool
        acquires R
        reads R
    {
        *&borrow_global<R>(@0x1).value
    }
    fun ok2(): bool
        reads R
    {
        exists<R>(@0x1)
    }
    fun ok3(p0: &signer): bool
        writes R
    {
        let _v0 = R{value: true};
        move_to<R>(p0, _v0);
        true
    }
    fun ok4(): bool
        acquires R
        writes R
    {
        let _v0 = &mut borrow_global_mut<R>(@0x1).value;
        *_v0 = false;
        true
    }
}


//# run --verbose --signers 0x1 -- 0x42::test::init

//# run --verbose -- 0x42::test::ok1

//# run --verbose -- 0x42::test::ok2

//# run --verbose --signers 0x2 -- 0x42::test::ok3

//# run --verbose -- 0x42::test::ok4

//# run --verbose -- 0x42::test::fail1

//# run --verbose -- 0x42::test::fail2

//# run --verbose -- 0x42::test::fail3

//# run --verbose -- 0x42::test::fail4

//# run --verbose -- 0x42::test::fail5