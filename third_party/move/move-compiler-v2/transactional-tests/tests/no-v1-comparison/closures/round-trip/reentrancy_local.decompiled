//**** Cross-compiled for `move` syntax from `tests/no-v1-comparison/closures/reentrancy_local.move`

//# publish
module 0x42::tests {
    struct R has key {
        _0: u64,
    }
    public fun init(p0: &signer) {
        let _v0 = R{_0: 0};
        move_to<R>(p0, _v0);
    }
    public fun local_access_via_lambda_fails(): bool
        acquires R
    {
        let _v0: || has copy + drop = || lambda__1__local_access_via_lambda_fails();
        let _v1 = borrow_global_mut<R>(@0x42);
        _v0();
        let _v2 = &mut _v1._0;
        *_v2 = *_v2 + 1;
        false
    }
    fun lambda__1__local_access_via_lambda_fails()
        acquires R
    {
        let _v0 = &mut borrow_global_mut<R>(@0x42)._0;
        *_v0 = *_v0 + 1;
    }
}


//# run 0x42::tests::init --signers 0x42

//# run 0x42::tests::local_access_via_lambda_fails --verbose