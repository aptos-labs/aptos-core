//# publish
module 0xc0ffee::m {
    use std::bcs;

    public fun test(): bool {
        let x = 1;
        let y = 2;
        let f: || u64 has drop = || {x + y + 1};
        let g: || u64 has drop = || {x + y + 1};
        bcs::to_bytes(&f) == bcs::to_bytes(&g)
    }
}

//# run 0xc0ffee::m::test

//# publish
module 0xc0ffee::n {
    public fun test(x: u64): u64 {
        let f = || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || || |x| x;
        let f1 = |x| f()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()(x);
        let f2 = |f| f(x);
        let f3 = |f1, f2| f1(f2);
        f3(f2, f1)
    }
}

//# run 0xc0ffee::n::test --args 42
