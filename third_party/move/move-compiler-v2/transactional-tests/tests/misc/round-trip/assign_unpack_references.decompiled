//**** Cross-compiled for `move` syntax from `tests/misc/assign_unpack_references.move`

//# publish
module 0x42::m {
    struct R has drop {
        s1: S,
        s2: S,
    }
    struct S has drop {
        f: u64,
    }
    fun t1() {
        let _v0 = S{f: 0};
        let _v1 = S{f: 1};
        let _v2 = R{s1: _v0, s2: _v1};
        let _v3 = &_v2;
        let _v4 = &_v3.s1;
        let _v5 = &_v3.s2;
        assert!(*&_v4.f == 0, 0);
        assert!(*&_v5.f == 1, 1);
    }
    fun t2() {
        let _v0 = S{f: 0};
        let _v1 = S{f: 1};
        let _v2 = R{s1: _v0, s2: _v1};
        let _v3 = &mut _v2;
        let _v4 = &mut _v3.s1;
        let _v5 = &mut _v3.s2;
        assert!(*&mut _v4.f == 0, 0);
        assert!(*&_v5.f == 1, 1);
        let _v6 = 5;
        let _v7 = &mut _v6;
        let _v8 = S{f: 0};
        _v5 = &mut _v8;
        assert!(*_v7 == 5, 0);
        assert!(*&_v5.f == 0, 1);
    }
}


//# run 0x42::m::t1

//# run 0x42::m::t2