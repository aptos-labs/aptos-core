// -- Model dump before first bytecode pipeline
module 0xc0ffee::m {
    private fun read(r: &u64): u64 {
        Deref(r)
    }
    private fun read_then_write(r: &mut u64) {
        {
          let v: u64 = m::read(Freeze(false)(r));
          r = Add<u64>(v, 1);
          Tuple()
        }
    }
} // end 0xc0ffee::m

// -- Sourcified model before first bytecode pipeline
module 0xc0ffee::m {
    fun read(r: &u64): u64 {
        *r
    }
    fun read_then_write(r: &mut u64) {
        let v = read(r);
        *r = v + 1;
    }
}

// -- Model dump before second bytecode pipeline
module 0xc0ffee::m {
    private fun read(r: &u64): u64 {
        Deref(r)
    }
    private fun read_then_write(r: &mut u64) {
        {
          let v: u64 = {
            let (r: &u64): (&u64) = Tuple(Freeze(false)(r));
            Deref(r)
          };
          r = Add<u64>(v, 1);
          Tuple()
        }
    }
} // end 0xc0ffee::m


============ disassembled file-format ==================
// Bytecode version v10
module 0xc0ffee::m
// Function definition at index 0
fun read(l0: &u64): u64
    move_loc l0
    read_ref
    ret

// Function definition at index 1
fun read_then_write(l0: &mut u64)
    copy_loc l0
    freeze_ref
    read_ref
    ld_u64 1
    add
    // @5
    move_loc l0
    write_ref
    ret


============ bytecode verification succeeded ========
