//# publish
module 0x22::A
struct C has copy + drop
  x: u64

public fun make(): C
    ld_u64 0
    pack C
    ret



//# publish
module 0x22::B
use 0x22::A
public fun test_copy()
    local l0: A::C
    local l1: &A::C
    local l2: A::C
    call A::make
    st_loc l0
    borrow_loc l0
    st_loc l1
    move_loc l1
    read_ref
    st_loc l2
    ret



//# run --signers 0x1
script
use 0x22::B
entry public fun main(l0: signer)
    call B::test_copy
    ret
