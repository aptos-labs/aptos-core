//# publish
module 0x22::test

public fun big_vec(): vector<u8>
    local v: vector<u8>
    local i: u64

    ld_const<vector<u8>> []
    st_loc v

    ld_u64 0
    st_loc i

L0:
    copy_loc i
    ld_u64 1025
    lt
    br_false L1

    mut_borrow_loc v
    ld_u8 0
    vec_push_back<u8>

    move_loc i
    ld_u64 1
    add
    st_loc i

    branch L0

L1:
    move_loc v
    ret

public fun abort_instr(a: u64)
    move_loc a
    call 0x22::test::big_vec
    abort_msg
    nop
    nop
    nop
    ret

//# run --verbose 0x22::test::abort_instr --args 404u64
