//# publish
module 0x1::A
use 0x1::signer
struct T1 has key
  v: u64

struct T2 has key
  v: u64

fun acquires_t1(l0: &signer) acquires T1
    local l1: u64
    move_loc l0
    call signer::address_of
    move_from T1
    unpack T1
    st_loc l1
    ret

fun acquires_t2(l0: &signer) acquires T2
    local l1: u64
    move_loc l0
    call signer::address_of
    move_from T2
    unpack T2
    st_loc l1
    ret

public fun test1(l0: &signer) acquires T1, T2
    local l1: &mut T1
    copy_loc l0
    call signer::address_of
    mut_borrow_global T1
    st_loc l1
    copy_loc l0
    call acquires_t2
    move_loc l0
    call acquires_t1
    move_loc l1
    pop
    ret



//# publish
module 0x1::A2
use 0x1::signer
struct T1 has key
  v: u64

struct T2 has key
  v: u64

fun acquires_t1(l0: &signer) acquires T1
    local l1: u64
    move_loc l0
    call signer::address_of
    move_from T1
    unpack T1
    st_loc l1
    ret

fun acquires_t2(l0: &signer) acquires T2
    local l1: u64
    move_loc l0
    call signer::address_of
    move_from T2
    unpack T2
    st_loc l1
    ret

public fun test2(l0: &signer) acquires T1, T2
    local l1: &mut T1
    copy_loc l0
    call signer::address_of
    mut_borrow_global T1
    st_loc l1
    copy_loc l0
    call acquires_t2
    move_loc l0
    call acquires_t1
    move_loc l1
    pop
    ret



//# publish
module 0x1::A2
use 0x1::signer
struct T1 has key
  v: u64

struct T2 has key
  v: u64

fun acquires_t1(l0: &signer) acquires T1
    local l1: u64
    move_loc l0
    call signer::address_of
    move_from T1
    unpack T1
    st_loc l1
    ret

fun acquires_t2(l0: &signer) acquires T2
    local l1: u64
    move_loc l0
    call signer::address_of
    move_from T2
    unpack T2
    st_loc l1
    ret

public fun test3(l0: &signer) acquires T1, T2
    local l1: &mut T1
    copy_loc l0
    call signer::address_of
    mut_borrow_global T1
    st_loc l1
    copy_loc l0
    call acquires_t1
    move_loc l1
    pop
    move_loc l0
    call acquires_t2
    ret