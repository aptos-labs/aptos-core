<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A set of tasks which are executed on the same thread."><meta name="keywords" content="rust, rustlang, rust-lang, LocalSet"><title>LocalSet in tokio::task - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../tokio/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../tokio/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">LocalSet</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><ul><li><a href="#method.block_on">block_on</a></li><li><a href="#method.enter">enter</a></li><li><a href="#method.new">new</a></li><li><a href="#method.run_until">run_until</a></li><li><a href="#method.spawn_local">spawn_local</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><ul><li><a href="#impl-Debug">Debug</a></li><li><a href="#impl-Default">Default</a></li><li><a href="#impl-Drop">Drop</a></li><li><a href="#impl-Future">Future</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul><li><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a></li><li><a href="#impl-Send">!Send</a></li><li><a href="#impl-Sync">!Sync</a></li><li><a href="#impl-Unpin">Unpin</a></li><li><a href="#impl-UnwindSafe">!UnwindSafe</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><ul><li><a href="#impl-Any">Any</a></li><li><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a></li><li><a href="#impl-IntoFuture">IntoFuture</a></li><li><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></li></ul></div></section><h2 class="location"><a href="index.html">In tokio::task</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../tokio/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Struct <a href="../index.html">tokio</a>::<wbr><a href="index.html">task</a>::<wbr><a class="struct" href="#">LocalSet</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/tokio/task/local.rs.html#214-223">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust struct"><code>pub struct LocalSet { /* private fields */ }</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A set of tasks which are executed on the same thread.</p>
<p>In some cases, it is necessary to run one or more futures that do not
implement <a href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Send.html"><code>Send</code></a> and thus are unsafe to send between threads. In these
cases, a <a href="struct.LocalSet.html">local task set</a> may be used to schedule one or more <code>!Send</code>
futures to run together on the same thread.</p>
<p>For example, the following code will not compile:</p>

<div class='information'><div class='tooltip compile_fail'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered compile_fail"><code><span class="kw">use</span> <span class="ident">std::rc::Rc</span>;

<span class="attribute">#[<span class="ident">tokio::main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="comment">// `Rc` does not implement `Send`, and thus may not be sent between</span>
    <span class="comment">// threads safely.</span>
    <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">Rc::new</span>(<span class="string">&quot;my unsend data...&quot;</span>);

    <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">unsend_data</span>.<span class="ident">clone</span>();
    <span class="comment">// Because the `async` block here moves `unsend_data`, the future is `!Send`.</span>
    <span class="comment">// Since `tokio::spawn` requires the spawned future to implement `Send`, this</span>
    <span class="comment">// will not compile.</span>
    <span class="ident">tokio::spawn</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">unsend_data</span>);
        <span class="comment">// ...</span>
    }).<span class="kw">await</span>.<span class="ident">unwrap</span>();
}</code></pre></div>
<h2 id="use-with-run_until"><a href="#use-with-run_until">Use with <code>run_until</code></a></h2>
<p>To spawn <code>!Send</code> futures, we can use a local task set to schedule them
on the thread calling <a href="../runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. When running inside of the
local task set, we can use <a href="fn.spawn_local.html"><code>task::spawn_local</code></a>, which can spawn
<code>!Send</code> futures. For example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">std::rc::Rc</span>;
<span class="kw">use</span> <span class="ident">tokio::task</span>;

<span class="attribute">#[<span class="ident">tokio::main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">Rc::new</span>(<span class="string">&quot;my unsend data...&quot;</span>);

    <span class="comment">// Construct a local task set that can run `!Send` futures.</span>
    <span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task::LocalSet::new</span>();

    <span class="comment">// Run the local task set.</span>
    <span class="ident">local</span>.<span class="ident">run_until</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">unsend_data</span>.<span class="ident">clone</span>();
        <span class="comment">// `spawn_local` ensures that the future is spawned on the local</span>
        <span class="comment">// task set.</span>
        <span class="ident">task::spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
            <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">unsend_data</span>);
            <span class="comment">// ...</span>
        }).<span class="kw">await</span>.<span class="ident">unwrap</span>();
    }).<span class="kw">await</span>;
}</code></pre></div>
<p><strong>Note:</strong> The <code>run_until</code> method can only be used in <code>#[tokio::main]</code>,
<code>#[tokio::test]</code> or directly inside a call to <a href="../runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. It
cannot be used inside a task spawned with <code>tokio::spawn</code>.</p>
<h3 id="awaiting-a-localset"><a href="#awaiting-a-localset">Awaiting a <code>LocalSet</code></a></h3>
<p>Additionally, a <code>LocalSet</code> itself implements <code>Future</code>, completing when
<em>all</em> tasks spawned on the <code>LocalSet</code> complete. This can be used to run
several futures on a <code>LocalSet</code> and drive the whole set until they
complete. For example,</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">tokio</span>::{<span class="ident">task</span>, <span class="ident">time</span>};
<span class="kw">use</span> <span class="ident">std::rc::Rc</span>;

<span class="attribute">#[<span class="ident">tokio::main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">Rc::new</span>(<span class="string">&quot;world&quot;</span>);
    <span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task::LocalSet::new</span>();

    <span class="kw">let</span> <span class="ident">unsend_data2</span> <span class="op">=</span> <span class="ident">unsend_data</span>.<span class="ident">clone</span>();
    <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="comment">// ...</span>
        <span class="macro">println!</span>(<span class="string">&quot;hello {}&quot;</span>, <span class="ident">unsend_data2</span>)
    });

    <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="ident">time::sleep</span>(<span class="ident">time::Duration::from_millis</span>(<span class="number">100</span>)).<span class="kw">await</span>;
        <span class="macro">println!</span>(<span class="string">&quot;goodbye {}&quot;</span>, <span class="ident">unsend_data</span>)
    });

    <span class="comment">// ...</span>

    <span class="ident">local</span>.<span class="kw">await</span>;
}</code></pre></div>
<p><strong>Note:</strong> Awaiting a <code>LocalSet</code> can only be done inside
<code>#[tokio::main]</code>, <code>#[tokio::test]</code> or directly inside a call to
<a href="../runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. It cannot be used inside a task spawned with
<code>tokio::spawn</code>.</p>
<h3 id="use-inside-tokiospawn"><a href="#use-inside-tokiospawn">Use inside <code>tokio::spawn</code></a></h3>
<p>The two methods mentioned above cannot be used inside <code>tokio::spawn</code>, so
to spawn <code>!Send</code> futures from inside <code>tokio::spawn</code>, we need to do
something else. The solution is to create the <code>LocalSet</code> somewhere else,
and communicate with it using an <a href="../sync/mpsc/index.html"><code>mpsc</code></a> channel.</p>
<p>The following example puts the <code>LocalSet</code> inside a new thread.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">tokio::runtime::Builder</span>;
<span class="kw">use</span> <span class="ident">tokio::sync</span>::{<span class="ident">mpsc</span>, <span class="ident">oneshot</span>};
<span class="kw">use</span> <span class="ident">tokio::task::LocalSet</span>;

<span class="comment">// This struct describes the task you want to spawn. Here we include</span>
<span class="comment">// some simple examples. The oneshot channel allows sending a response</span>
<span class="comment">// to the spawner.</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">enum</span> <span class="ident">Task</span> {
    <span class="ident">PrintNumber</span>(<span class="ident">u32</span>),
    <span class="ident">AddOne</span>(<span class="ident">u32</span>, <span class="ident">oneshot::Sender</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span>),
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">LocalSpawner</span> {
   <span class="ident">send</span>: <span class="ident">mpsc::UnboundedSender</span><span class="op">&lt;</span><span class="ident">Task</span><span class="op">&gt;</span>,
}

<span class="kw">impl</span> <span class="ident">LocalSpawner</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="kw">let</span> (<span class="ident">send</span>, <span class="kw-2">mut</span> <span class="ident">recv</span>) <span class="op">=</span> <span class="ident">mpsc::unbounded_channel</span>();

        <span class="kw">let</span> <span class="ident">rt</span> <span class="op">=</span> <span class="ident">Builder::new_current_thread</span>()
            .<span class="ident">enable_all</span>()
            .<span class="ident">build</span>()
            .<span class="ident">unwrap</span>();

        <span class="ident">std::thread::spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
            <span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">LocalSet::new</span>();

            <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
                <span class="kw">while</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">new_task</span>) <span class="op">=</span> <span class="ident">recv</span>.<span class="ident">recv</span>().<span class="kw">await</span> {
                    <span class="ident">tokio::task::spawn_local</span>(<span class="ident">run_task</span>(<span class="ident">new_task</span>));
                }
                <span class="comment">// If the while loop returns, then all the LocalSpawner</span>
                <span class="comment">// objects have been dropped.</span>
            });

            <span class="comment">// This will return once all senders are dropped and all</span>
            <span class="comment">// spawned tasks have returned.</span>
            <span class="ident">rt</span>.<span class="ident">block_on</span>(<span class="ident">local</span>);
        });

        <span class="self">Self</span> {
            <span class="ident">send</span>,
        }
    }

    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">spawn</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">task</span>: <span class="ident">Task</span>) {
        <span class="self">self</span>.<span class="ident">send</span>.<span class="ident">send</span>(<span class="ident">task</span>).<span class="ident">expect</span>(<span class="string">&quot;Thread with LocalSet has shut down.&quot;</span>);
    }
}

<span class="comment">// This task may do !Send stuff. We use printing a number as an example,</span>
<span class="comment">// but it could be anything.</span>
<span class="comment">//</span>
<span class="comment">// The Task struct is an enum to support spawning many different kinds</span>
<span class="comment">// of operations.</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">run_task</span>(<span class="ident">task</span>: <span class="ident">Task</span>) {
    <span class="kw">match</span> <span class="ident">task</span> {
        <span class="ident">Task::PrintNumber</span>(<span class="ident">n</span>) =&gt; {
            <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">n</span>);
        },
        <span class="ident">Task::AddOne</span>(<span class="ident">n</span>, <span class="ident">response</span>) =&gt; {
            <span class="comment">// We ignore failures to send the response.</span>
            <span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">response</span>.<span class="ident">send</span>(<span class="ident">n</span> <span class="op">+</span> <span class="number">1</span>);
        },
    }
}

<span class="attribute">#[<span class="ident">tokio::main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">spawner</span> <span class="op">=</span> <span class="ident">LocalSpawner::new</span>();

    <span class="kw">let</span> (<span class="ident">send</span>, <span class="ident">response</span>) <span class="op">=</span> <span class="ident">oneshot::channel</span>();
    <span class="ident">spawner</span>.<span class="ident">spawn</span>(<span class="ident">Task::AddOne</span>(<span class="number">10</span>, <span class="ident">send</span>));
    <span class="kw">let</span> <span class="ident">eleven</span> <span class="op">=</span> <span class="ident">response</span>.<span class="kw">await</span>.<span class="ident">unwrap</span>();
    <span class="macro">assert_eq!</span>(<span class="ident">eleven</span>, <span class="number">11</span>);
}</code></pre></div>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><div id="implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#350-667">source</a></span><a href="#impl" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#352-368">source</a></span><a href="#method.new" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.new" class="fnname">new</a>() -&gt; <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a><span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></span><code class="content"><span class="where fmt-newline">impl <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" class="associatedtype">Output</a> = <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.unit.html">()</a>;</span></code></span></span></span></span></h4></section></summary><div class="docblock"><p>Returns a new local task set.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.enter" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#376-381">source</a></span><a href="#method.enter" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.enter" class="fnname">enter</a>(&amp;self) -&gt; <a class="struct" href="struct.LocalEnterGuard.html" title="struct tokio::task::LocalEnterGuard">LocalEnterGuard</a></h4></section></summary><div class="docblock"><p>Enters the context of this <code>LocalSet</code>.</p>
<p>The <a href="fn.spawn_local.html"><code>spawn_local</code></a> method will spawn tasks on the <code>LocalSet</code> whose
context you are inside.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.spawn_local" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#420-426">source</a></span><a href="#method.spawn_local" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.spawn_local" class="fnname">spawn_local</a>&lt;F&gt;(&amp;self, future: F) -&gt; <a class="struct" href="struct.JoinHandle.html" title="struct tokio::task::JoinHandle">JoinHandle</a>&lt;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>&gt;<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="struct.JoinHandle.html" title="struct tokio::task::JoinHandle">JoinHandle</a>&lt;T&gt;</span><code class="content"><span class="where fmt-newline">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="struct.JoinHandle.html" title="struct tokio::task::JoinHandle">JoinHandle</a>&lt;T&gt;</span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" class="associatedtype">Output</a> = <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="struct.JoinError.html" title="struct tokio::task::JoinError">JoinError</a>&gt;;</span></code></span></span></span></span> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>: 'static,&nbsp;</span></h4></section></summary><div class="docblock"><p>Spawns a <code>!Send</code> task onto the local task set.</p>
<p>This task is guaranteed to be run on the current thread.</p>
<p>Unlike the free function <a href="fn.spawn_local.html"><code>spawn_local</code></a>, this method may be used to
spawn local tasks when the task set is <em>not</em> running. For example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">tokio::task</span>;

<span class="attribute">#[<span class="ident">tokio::main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task::LocalSet::new</span>();

    <span class="comment">// Spawn a future on the local set. This future will be run when</span>
    <span class="comment">// we call `run_until` to drive the task set.</span>
    <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> {
       <span class="comment">// ...</span>
    });

    <span class="comment">// Run the local task set.</span>
    <span class="ident">local</span>.<span class="ident">run_until</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="comment">// ...</span>
    }).<span class="kw">await</span>;

    <span class="comment">// When `run` finishes, we can spawn _more_ futures, which will</span>
    <span class="comment">// run in subsequent calls to `run_until`.</span>
    <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> {
       <span class="comment">// ...</span>
    });

    <span class="ident">local</span>.<span class="ident">run_until</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="comment">// ...</span>
    }).<span class="kw">await</span>;
}</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.block_on" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#493-498">source</a></span><a href="#method.block_on" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.block_on" class="fnname">block_on</a>&lt;F&gt;(&amp;self, rt: &amp;<a class="struct" href="../runtime/struct.Runtime.html" title="struct tokio::runtime::Runtime">Runtime</a>, future: F) -&gt; F::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Runs a future to completion on the provided runtime, driving any local
futures spawned on this task set on the current thread.</p>
<p>This runs the given future on the runtime, blocking until it is
complete, and yielding its resolved result. Any tasks or timers which
the future spawns internally will be executed on the runtime. The future
may also call <a href="fn.spawn_local.html"><code>spawn_local</code></a> to spawn_local additional local futures on the
current thread.</p>
<p>This method should not be called from an asynchronous context.</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<p>This function panics if the executor is at capacity, if the provided
future panics, or if called within an asynchronous execution context.</p>
<h5 id="notes"><a href="#notes">Notes</a></h5>
<p>Since this function internally calls <a href="../runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>, and drives
futures in the local task set inside that call to <code>block_on</code>, the local
futures may not use <a href="fn.block_in_place.html">in-place blocking</a>. If a blocking call needs to be
issued from a local task, the <a href="fn.spawn_blocking.html"><code>spawn_blocking</code></a> API may be used instead.</p>
<p>For example, this will panic:</p>

<div class='information'><div class='tooltip should_panic'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered should_panic"><code><span class="kw">use</span> <span class="ident">tokio::runtime::Runtime</span>;
<span class="kw">use</span> <span class="ident">tokio::task</span>;

<span class="kw">let</span> <span class="ident">rt</span>  <span class="op">=</span> <span class="ident">Runtime::new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task::LocalSet::new</span>();
<span class="ident">local</span>.<span class="ident">block_on</span>(<span class="kw-2">&amp;</span><span class="ident">rt</span>, <span class="kw">async</span> {
    <span class="kw">let</span> <span class="ident">join</span> <span class="op">=</span> <span class="ident">task::spawn_local</span>(<span class="kw">async</span> {
        <span class="kw">let</span> <span class="ident">blocking_result</span> <span class="op">=</span> <span class="ident">task::block_in_place</span>(<span class="op">|</span><span class="op">|</span> {
            <span class="comment">// ...</span>
        });
        <span class="comment">// ...</span>
    });
    <span class="ident">join</span>.<span class="kw">await</span>.<span class="ident">unwrap</span>();
})</code></pre></div>
<p>This, however, will not panic:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">tokio::runtime::Runtime</span>;
<span class="kw">use</span> <span class="ident">tokio::task</span>;

<span class="kw">let</span> <span class="ident">rt</span>  <span class="op">=</span> <span class="ident">Runtime::new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task::LocalSet::new</span>();
<span class="ident">local</span>.<span class="ident">block_on</span>(<span class="kw-2">&amp;</span><span class="ident">rt</span>, <span class="kw">async</span> {
    <span class="kw">let</span> <span class="ident">join</span> <span class="op">=</span> <span class="ident">task::spawn_local</span>(<span class="kw">async</span> {
        <span class="kw">let</span> <span class="ident">blocking_result</span> <span class="op">=</span> <span class="ident">task::spawn_blocking</span>(<span class="op">|</span><span class="op">|</span> {
            <span class="comment">// ...</span>
        }).<span class="kw">await</span>;
        <span class="comment">// ...</span>
    });
    <span class="ident">join</span>.<span class="kw">await</span>.<span class="ident">unwrap</span>();
})</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run_until" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#528-537">source</a></span><a href="#method.run_until" class="anchor"></a><h4 class="code-header">pub async fn <a href="#method.run_until" class="fnname">run_until</a>&lt;F&gt;(&amp;self, future: F) -&gt; F::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Runs a future to completion on the local set, returning its output.</p>
<p>This returns a future that runs the given future with a local set,
allowing it to call <a href="fn.spawn_local.html"><code>spawn_local</code></a> to spawn additional <code>!Send</code> futures.
Any local futures spawned on the local set will be driven in the
background until the future passed to <code>run_until</code> completes. When the future
passed to <code>run</code> finishes, any local futures which have not completed
will remain on the local set, and will be driven on subsequent calls to
<code>run_until</code> or when <a href="#awaiting-a-localset">awaiting the local set</a> itself.</p>
<h5 id="examples"><a href="#examples">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">tokio::task</span>;

<span class="attribute">#[<span class="ident">tokio::main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="ident">task::LocalSet::new</span>().<span class="ident">run_until</span>(<span class="kw">async</span> {
        <span class="ident">task::spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
            <span class="comment">// ...</span>
        }).<span class="kw">await</span>.<span class="ident">unwrap</span>();
        <span class="comment">// ...</span>
    }).<span class="kw">await</span>;
}</code></pre></div>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Debug" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#740-744">source</a></span><a href="#impl-Debug" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#741-743">source</a></span><a href="#method.fmt" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/fmt/trait.Debug.html#tymethod.fmt" class="fnname">fmt</a>(&amp;self, fmt: &amp;mut <a class="struct" href="https://doc.rust-lang.org/1.63.0/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/1.63.0/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/1.63.0/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Default" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#770-774">source</a></span><a href="#impl-Default" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.default" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#771-773">source</a></span><a href="#method.default" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html#tymethod.default" class="fnname">default</a>() -&gt; <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a><span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></span><code class="content"><span class="where fmt-newline">impl <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" class="associatedtype">Output</a> = <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.unit.html">()</a>;</span></code></span></span></span></span></h4></section></summary><div class='docblock'><p>Returns the “default value” for a type. <a href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Drop" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#776-799">source</a></span><a href="#impl-Drop" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/ops/drop/trait.Drop.html" title="trait core::ops::drop::Drop">Drop</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.drop" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#777-798">source</a></span><a href="#method.drop" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/ops/drop/trait.Drop.html#tymethod.drop" class="fnname">drop</a>(&amp;mut self)</h4></section></summary><div class='docblock'><p>Executes the destructor for this type. <a href="https://doc.rust-lang.org/1.63.0/core/ops/drop/trait.Drop.html#tymethod.drop">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Future" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#746-768">source</a></span><a href="#impl-Future" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Output" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Output" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" class="associatedtype">Output</a> = <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.unit.html">()</a></h4></section></summary><div class='docblock'><p>The type of value produced on completion.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.poll" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/tokio/task/local.rs.html#749-767">source</a></span><a href="#method.poll" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#tymethod.poll" class="fnname">poll</a>(self: <a class="struct" href="https://doc.rust-lang.org/1.63.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;mut </a>Self&gt;, cx: &amp;mut <a class="struct" href="https://doc.rust-lang.org/1.63.0/core/task/wake/struct.Context.html" title="struct core::task::wake::Context">Context</a>&lt;'_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/task/poll/enum.Poll.html" title="enum core::task::poll::Poll">Poll</a>&lt;Self::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>&gt;</h4></section></summary><div class='docblock'><p>Attempt to resolve the future to a final value, registering
the current task for wakeup if the value is not yet available. <a href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#tymethod.poll">Read more</a></p>
</div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe" class="impl has-srclink"><a href="#impl-RefUnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl !<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section><section id="impl-Send" class="impl has-srclink"><a href="#impl-Send" class="anchor"></a><h3 class="code-header in-band">impl !<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section><section id="impl-Sync" class="impl has-srclink"><a href="#impl-Sync" class="anchor"></a><h3 class="code-header in-band">impl !<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section><section id="impl-Unpin" class="impl has-srclink"><a href="#impl-Unpin" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section><section id="impl-UnwindSafe" class="impl has-srclink"><a href="#impl-UnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl !<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Any" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/any.rs.html#203-207">source</a></span><a href="#impl-Any" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/any.rs.html#204">source</a></span><a href="#method.type_id" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.63.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.63.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/borrow.rs.html#209-214">source</a></span><a href="#impl-Borrow%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/borrow.rs.html#211">source</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;</a>T</h4></section></summary><div class='docblock'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/borrow.rs.html#218-222">source</a></span><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/borrow.rs.html#219">source</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;mut </a>T</h4></section></summary><div class='docblock'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#557-562">source</a></span><a href="#impl-From%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#559">source</a></span><a href="#method.from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#541-552">source</a></span><a href="#impl-Into%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#549">source</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.From.html" title="From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-IntoFuture" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/future/into_future.rs.html#140-147">source</a></span><a href="#impl-IntoFuture" class="anchor"></a><h3 class="code-header in-band">impl&lt;F&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/into_future/trait.IntoFuture.html" title="trait core::future::into_future::IntoFuture">IntoFuture</a> for F <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Output-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Output-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.63.0/core/future/into_future/trait.IntoFuture.html#associatedtype.Output" class="associatedtype">Output</a> = &lt;F as <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a></h4></section></summary><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>into_future</code>)</div></span><div class='docblock'><p>The output that the future will produce on completion.</p>
</div></details><details class="rustdoc-toggle" open><summary><section id="associatedtype.IntoFuture" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.IntoFuture" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.63.0/core/future/into_future/trait.IntoFuture.html#associatedtype.IntoFuture" class="associatedtype">IntoFuture</a> = F</h4></section></summary><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>into_future</code>)</div></span><div class='docblock'><p>Which kind of future are we turning this into?</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into_future" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/future/into_future.rs.html#144">source</a></span><a href="#method.into_future" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/future/into_future/trait.IntoFuture.html#tymethod.into_future" class="fnname">into_future</a>(self) -&gt; &lt;F as <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/future/into_future/trait.IntoFuture.html" title="trait core::future::into_future::IntoFuture">IntoFuture</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/future/into_future/trait.IntoFuture.html#associatedtype.IntoFuture" title="type core::future::into_future::IntoFuture::IntoFuture">IntoFuture</a></h4></section></summary><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>into_future</code>)</div></span><div class='docblock'><p>Creates a future from a value. <a href="https://doc.rust-lang.org/1.63.0/core/future/into_future/trait.IntoFuture.html#tymethod.into_future">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#598-607">source</a></span><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#604">source</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#583-592">source</a></span><a href="#impl-TryInto%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#589">source</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="tokio" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0 (4b91a6ea7 2022-08-08)" ></div>
</body></html>