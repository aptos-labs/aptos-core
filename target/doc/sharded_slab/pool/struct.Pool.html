<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A lock-free concurrent object pool."><meta name="keywords" content="rust, rustlang, rust-lang, Pool"><title>Pool in sharded_slab::pool - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../sharded_slab/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../sharded_slab/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Pool</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#implementations">Associated Constants</a></h3><ul><li><a href="#associatedconstant.USED_BITS">USED_BITS</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><ul><li><a href="#method.clear">clear</a></li><li><a href="#method.create">create</a></li><li><a href="#method.create_owned">create_owned</a></li><li><a href="#method.create_with">create_with</a></li><li><a href="#method.get">get</a></li><li><a href="#method.get_owned">get_owned</a></li><li><a href="#method.new">new</a></li><li><a href="#method.new_with_config">new_with_config</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><ul><li><a href="#impl-Debug">Debug</a></li><li><a href="#impl-Default">Default</a></li><li><a href="#impl-Send">Send</a></li><li><a href="#impl-Sync">Sync</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul><li><a href="#impl-RefUnwindSafe">RefUnwindSafe</a></li><li><a href="#impl-Unpin">Unpin</a></li><li><a href="#impl-UnwindSafe">!UnwindSafe</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><ul><li><a href="#impl-Any">Any</a></li><li><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></li></ul></div></section><h2 class="location"><a href="index.html">In sharded_slab::pool</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../sharded_slab/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Struct <a href="../index.html">sharded_slab</a>::<wbr><a href="index.html">pool</a>::<wbr><a class="struct" href="#">Pool</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#84-91">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust struct"><code>pub struct Pool&lt;T, C&nbsp;=&nbsp;<a class="struct" href="../struct.DefaultConfig.html" title="struct sharded_slab::DefaultConfig">DefaultConfig</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../trait.Clear.html" title="trait sharded_slab::Clear">Clear</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="../trait.Config.html" title="trait sharded_slab::Config">Config</a>,&nbsp;</span> { /* private fields */ }</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A lock-free concurrent object pool.</p>
<p>Slabs provide pre-allocated storage for many instances of a single type. But, when working with
heap allocated objects, the advantages of a slab are lost, as the memory allocated for the
object is freed when the object is removed from the slab. With a pool, we can instead reuse
this memory for objects being added to the pool in the future, therefore reducing memory
fragmentation and avoiding additional allocations.</p>
<p>This type implements a lock-free concurrent pool, indexed by <code>usize</code>s. The items stored in this
type need to implement <a href="../trait.Clear.html"><code>Clear</code></a> and <code>Default</code>.</p>
<p>The <code>Pool</code> type shares similar semantics to <a href="../struct.Slab.html"><code>Slab</code></a> when it comes to sharing across threads
and storing mutable shared data. The biggest difference is there are no <a href="../struct.Slab.html#method.insert"><code>Slab::insert</code></a> and
<a href="../struct.Slab.html#method.take"><code>Slab::take</code></a> analouges for the <code>Pool</code> type. Instead new items are added to the pool by using
the <a href="../struct.Pool.html#method.create"><code>Pool::create</code></a> method, and marked for clearing by the <a href="../struct.Pool.html#method.clear"><code>Pool::clear</code></a> method.</p>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<p>Add an entry to the pool, returning an index:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Pool::new</span>();

<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create_with</span>(<span class="op">|</span><span class="ident">item</span><span class="op">|</span> <span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>)).<span class="ident">unwrap</span>();
<span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));</code></pre></div>
<p>Create a new pooled item, returning a guard that allows mutable access:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Pool::new</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">guard</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">guard</span>.<span class="ident">key</span>();
<span class="ident">guard</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>);

<span class="ident">drop</span>(<span class="ident">guard</span>); <span class="comment">// release the guard, allowing immutable access.</span>
<span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));</code></pre></div>
<p>Pool entries can be cleared by calling <a href="../struct.Pool.html#method.clear"><code>Pool::clear</code></a>. This marks the entry to
be cleared when the guards referencing to it are dropped.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Pool::new</span>();

<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create_with</span>(<span class="op">|</span><span class="ident">item</span><span class="op">|</span> <span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Mark this entry to be cleared.</span>
<span class="ident">pool</span>.<span class="ident">clear</span>(<span class="ident">key</span>);

<span class="comment">// The cleared entry is no longer available in the pool</span>
<span class="macro">assert!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">is_none</span>());</code></pre></div>
<h2 id="configuration"><a href="#configuration">Configuration</a></h2>
<p>Both <code>Pool</code> and <a href="../struct.Slab.html"><code>Slab</code></a> share the same configuration mechanism. See <a href="../index.html#configuration">crate level documentation</a>
for more details.</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><div id="implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#381-398">source</a></span><a href="#impl" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../trait.Clear.html" title="trait sharded_slab::Clear">Clear</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#386-388">source</a></span><a href="#method.new" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.new" class="fnname">new</a>() -&gt; Self</h4></section></summary><div class="docblock"><p>Returns a new <code>Pool</code> with the default configuration parameters.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new_with_config" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#391-397">source</a></span><a href="#method.new_with_config" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.new_with_config" class="fnname">new_with_config</a>&lt;C:&nbsp;<a class="trait" href="../trait.Config.html" title="trait sharded_slab::Config">Config</a>&gt;() -&gt; <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T, C&gt;</h4></section></summary><div class="docblock"><p>Returns a new <code>Pool</code> with the provided configuration parameters.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-1" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#400-834">source</a></span><a href="#impl-1" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, C&gt; <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T, C&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../trait.Clear.html" title="trait sharded_slab::Clear">Clear</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="../trait.Config.html" title="trait sharded_slab::Config">Config</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedconstant.USED_BITS" class="associatedconstant has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#418">source</a></span><a href="#associatedconstant.USED_BITS" class="anchor"></a><h4 class="code-header">pub const <a href="#associatedconstant.USED_BITS" class="constant">USED_BITS</a>: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a> = C::USED_BITS</h4></section></summary><div class="docblock"><p>The number of bits in each index which are used by the pool.</p>
<p>If other data is packed into the <code>usize</code> indices returned by
<a href="../struct.Pool.html#method.create" title="Pool::create"><code>Pool::create</code></a>, user code is free to use any bits higher than the
<code>USED_BITS</code>-th bit freely.</p>
<p>This is determined by the <a href="trait.Config.html"><code>Config</code></a> type that configures the pool’s
parameters. By default, all bits are used; this can be changed by
overriding the <a href="trait.Config.html#associatedconstant.RESERVED_BITS"><code>Config::RESERVED_BITS</code></a> constant.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#451-464">source</a></span><a href="#method.create" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.create" class="fnname">create</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.RefMut.html" title="struct sharded_slab::pool::RefMut">RefMut</a>&lt;'_, T, C&gt;&gt;</h4></section></summary><div class="docblock"><p>Creates a new object in the pool, returning an <a href="struct.RefMut.html"><code>RefMut</code></a> guard that
may be used to mutate the new object.</p>
<p>If this function returns <code>None</code>, then the shard for the current thread is full and no items
can be added until some are removed, or the maximum number of shards has been reached.</p>
<h5 id="examples-1"><a href="#examples-1">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Pool::new</span>();

<span class="comment">// Create a new pooled item, returning a guard that allows mutable</span>
<span class="comment">// access to the new item.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">item</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create</span>().<span class="ident">unwrap</span>();
<span class="comment">// Return a key that allows indexing the created item once the guard</span>
<span class="comment">// has been dropped.</span>
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">item</span>.<span class="ident">key</span>();

<span class="comment">// Mutate the item.</span>
<span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;Hello&quot;</span>);
<span class="comment">// Drop the guard, releasing mutable access to the new item.</span>
<span class="ident">drop</span>(<span class="ident">item</span>);

<span class="doccomment">/// Other threads may now (immutably) access the item using the returned key.</span>
<span class="ident">thread::spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
   <span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;Hello&quot;</span>));
}).<span class="ident">join</span>().<span class="ident">unwrap</span>();</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_owned" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#619-632">source</a></span><a href="#method.create_owned" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.create_owned" class="fnname">create_owned</a>(self: <a class="struct" href="https://doc.rust-lang.org/1.63.0/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;Self&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.OwnedRefMut.html" title="struct sharded_slab::pool::OwnedRefMut">OwnedRefMut</a>&lt;T, C&gt;&gt;</h4></section></summary><div class="docblock"><p>Creates a new object in the pool, returning an <a href="struct.OwnedRefMut.html"><code>OwnedRefMut</code></a> guard that
may be used to mutate the new object.</p>
<p>If this function returns <code>None</code>, then the shard for the current thread
is full and no items can be added until some are removed, or the maximum
number of shards has been reached.</p>
<p>Unlike <a href="../struct.Pool.html#method.create"><code>create</code></a>, which borrows the pool, this method <em>clones</em> the <code>Arc</code>
around the pool if a value exists for the given key. This means that the
returned <a href="struct.OwnedRefMut.html"><code>OwnedRefMut</code></a> can be held for an arbitrary lifetime. However,
this method requires that the pool itself be wrapped in an <code>Arc</code>.</p>
<p>An <code>OwnedRefMut&lt;T&gt;</code> functions more or less identically to an owned
<code>Box&lt;T&gt;</code>: it can be passed to functions, stored in structure fields, and
borrowed mutably or immutably, and can be owned for arbitrary lifetimes.
The difference is that, unlike a <code>Box&lt;T&gt;</code>, the memory allocation for the
<code>T</code> lives in the <code>Pool</code>; when an <code>OwnedRefMut</code> is created, it may reuse
memory that was allocated for a previous pooled object that has been
cleared. Additionally, the <code>OwnedRefMut</code> may be <a href="struct.OwnedRefMut.html#method.downgrade">downgraded</a> to an
<a href="struct.OwnedRef.html"><code>OwnedRef</code></a> which may be shared freely, essentially turning the <code>Box</code>
into an <code>Arc</code>.</p>
<h5 id="examples-2"><a href="#examples-2">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">std::sync::Arc</span>;

<span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Arc</span><span class="op">&lt;</span><span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">Pool::new</span>());

<span class="comment">// Create a new pooled item, returning an owned guard that allows mutable</span>
<span class="comment">// access to the new item.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">item</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">clone</span>().<span class="ident">create_owned</span>().<span class="ident">unwrap</span>();
<span class="comment">// Return a key that allows indexing the created item once the guard</span>
<span class="comment">// has been dropped.</span>
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">item</span>.<span class="ident">key</span>();

<span class="comment">// Mutate the item.</span>
<span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;Hello&quot;</span>);
<span class="comment">// Drop the guard, releasing mutable access to the new item.</span>
<span class="ident">drop</span>(<span class="ident">item</span>);

<span class="doccomment">/// Other threads may now (immutably) access the item using the returned key.</span>
<span class="ident">thread::spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
   <span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;Hello&quot;</span>));
}).<span class="ident">join</span>().<span class="ident">unwrap</span>();</code></pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">std::sync::Arc</span>;

<span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Arc</span><span class="op">&lt;</span><span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">Pool::new</span>());

<span class="comment">// Create a new item, returning an owned, mutable guard.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">value</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">clone</span>().<span class="ident">create_owned</span>().<span class="ident">unwrap</span>();

<span class="comment">// Now, the original `Arc` clone of the pool may be dropped, but the</span>
<span class="comment">// returned `OwnedRefMut` can still access the value.</span>
<span class="ident">drop</span>(<span class="ident">pool</span>);

<span class="ident">value</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>);
<span class="macro">assert_eq!</span>(<span class="ident">value</span>, <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));</code></pre></div>
<p>Unlike <a href="struct.RefMut.html"><code>RefMut</code></a>, an <code>OwnedRefMut</code> may be stored in a struct which must live
for the <code>'static</code> lifetime:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">sharded_slab::pool::OwnedRefMut</span>;
<span class="kw">use</span> <span class="ident">std::sync::Arc</span>;

<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">MyStruct</span> {
    <span class="ident">pool_ref</span>: <span class="ident">OwnedRefMut</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>,
    <span class="comment">// ... other fields ...</span>
}

<span class="comment">// Suppose this is some arbitrary function which requires a value that</span>
<span class="comment">// lives for the &#39;static lifetime...</span>
<span class="kw">fn</span> <span class="ident">function_requiring_static</span><span class="op">&lt;</span><span class="ident">T</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span>(<span class="ident">t</span>: <span class="kw-2">&amp;</span><span class="ident">T</span>) {
    <span class="comment">// ... do something extremely important and interesting ...</span>
}

<span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Arc</span><span class="op">&lt;</span><span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">Pool::new</span>());

<span class="comment">// Create a new item, returning a mutable owned reference.</span>
<span class="kw">let</span> <span class="ident">pool_ref</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">clone</span>().<span class="ident">create_owned</span>().<span class="ident">unwrap</span>();

<span class="kw">let</span> <span class="ident">my_struct</span> <span class="op">=</span> <span class="ident">MyStruct</span> {
    <span class="ident">pool_ref</span>,
    <span class="comment">// ...</span>
};

<span class="comment">// We can use `my_struct` anywhere where it is required to have the</span>
<span class="comment">// `&#39;static` lifetime:</span>
<span class="ident">function_requiring_static</span>(<span class="kw-2">&amp;</span><span class="ident">my_struct</span>);</code></pre></div>
<p><code>OwnedRefMut</code>s may be sent between threads:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">std</span>::{<span class="ident">thread</span>, <span class="ident">sync::Arc</span>};

<span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Arc</span><span class="op">&lt;</span><span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">Pool::new</span>());

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">value</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">clone</span>().<span class="ident">create_owned</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">value</span>.<span class="ident">key</span>();

<span class="ident">thread::spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
    <span class="ident">value</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>);
    <span class="comment">// ...</span>
}).<span class="ident">join</span>().<span class="ident">unwrap</span>();

<span class="comment">// Once the `OwnedRefMut` has been dropped by the other thread, we may</span>
<span class="comment">// now access the value immutably on this thread.</span>

<span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));</code></pre></div>
<p>Downgrading from a mutable to an immutable reference:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">std</span>::{<span class="ident">thread</span>, <span class="ident">sync::Arc</span>};

<span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Arc</span><span class="op">&lt;</span><span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">Pool::new</span>());

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">value</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">clone</span>().<span class="ident">create_owned</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">value</span>.<span class="ident">key</span>();
<span class="ident">value</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>);

<span class="comment">// Downgrade the mutable owned ref to an immutable owned ref.</span>
<span class="kw">let</span> <span class="ident">value</span> <span class="op">=</span> <span class="ident">value</span>.<span class="ident">downgrade</span>();

<span class="comment">// Once the `OwnedRefMut` has been downgraded, other threads may</span>
<span class="comment">// immutably access the pooled value:</span>
<span class="ident">thread::spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
    <span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));
}).<span class="ident">join</span>().<span class="ident">unwrap</span>();

<span class="comment">// This thread can still access the pooled value through the</span>
<span class="comment">// immutable owned ref:</span>
<span class="macro">assert_eq!</span>(<span class="ident">value</span>, <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_with" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#654-659">source</a></span><a href="#method.create_with" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.create_with" class="fnname">create_with</a>(&amp;self, init: impl <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;mut </a>T)) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Creates a new object in the pool with the provided initializer,
returning a key that may be used to access the new object.</p>
<p>If this function returns <code>None</code>, then the shard for the current thread is full and no items
can be added until some are removed, or the maximum number of shards has been reached.</p>
<h5 id="examples-3"><a href="#examples-3">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Pool::new</span>();

<span class="comment">// Create a new pooled item, returning its integer key.</span>
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create_with</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> <span class="ident">s</span>.<span class="ident">push_str</span>(<span class="string">&quot;Hello&quot;</span>)).<span class="ident">unwrap</span>();

<span class="doccomment">/// Other threads may now (immutably) access the item using the key.</span>
<span class="ident">thread::spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
   <span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;Hello&quot;</span>));
}).<span class="ident">join</span>().<span class="ident">unwrap</span>();</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#675-682">source</a></span><a href="#method.get" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get" class="fnname">get</a>(&amp;self, key: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.Ref.html" title="struct sharded_slab::pool::Ref">Ref</a>&lt;'_, T, C&gt;&gt;</h4></section></summary><div class="docblock"><p>Return a borrowed reference to the value associated with the given key.</p>
<p>If the pool does not contain a value for the given key, <code>None</code> is returned instead.</p>
<h5 id="examples-4"><a href="#examples-4">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Pool::new</span>();
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create_with</span>(<span class="op">|</span><span class="ident">item</span><span class="op">|</span> <span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>)).<span class="ident">unwrap</span>();

<span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));
<span class="macro">assert!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="number">12345</span>).<span class="ident">is_none</span>());</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_owned" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#766-777">source</a></span><a href="#method.get_owned" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_owned" class="fnname">get_owned</a>(self: <a class="struct" href="https://doc.rust-lang.org/1.63.0/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;Self&gt;, key: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.OwnedRef.html" title="struct sharded_slab::pool::OwnedRef">OwnedRef</a>&lt;T, C&gt;&gt;</h4></section></summary><div class="docblock"><p>Return an owned reference to the value associated with the given key.</p>
<p>If the pool does not contain a value for the given key, <code>None</code> is
returned instead.</p>
<p>Unlike <a href="../struct.Pool.html#method.get"><code>get</code></a>, which borrows the pool, this method <em>clones</em> the <code>Arc</code>
around the pool if a value exists for the given key. This means that the
returned <a href="struct.OwnedRef.html"><code>OwnedRef</code></a> can be held for an arbitrary lifetime. However,
this method requires that the pool itself be wrapped in an <code>Arc</code>.</p>
<h5 id="examples-5"><a href="#examples-5">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">std::sync::Arc</span>;

<span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Arc</span><span class="op">&lt;</span><span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">Pool::new</span>());
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create_with</span>(<span class="op">|</span><span class="ident">item</span><span class="op">|</span> <span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Look up the created `Key`, returning an `OwnedRef`.</span>
<span class="kw">let</span> <span class="ident">value</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">clone</span>().<span class="ident">get_owned</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>();

<span class="comment">// Now, the original `Arc` clone of the pool may be dropped, but the</span>
<span class="comment">// returned `OwnedRef` can still access the value.</span>
<span class="macro">assert_eq!</span>(<span class="ident">value</span>, <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));</code></pre></div>
<p>Unlike <a href="struct.Ref.html"><code>Ref</code></a>, an <code>OwnedRef</code> may be stored in a struct which must live
for the <code>'static</code> lifetime:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">sharded_slab::pool::OwnedRef</span>;
<span class="kw">use</span> <span class="ident">std::sync::Arc</span>;

<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">MyStruct</span> {
    <span class="ident">pool_ref</span>: <span class="ident">OwnedRef</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>,
    <span class="comment">// ... other fields ...</span>
}

<span class="comment">// Suppose this is some arbitrary function which requires a value that</span>
<span class="comment">// lives for the &#39;static lifetime...</span>
<span class="kw">fn</span> <span class="ident">function_requiring_static</span><span class="op">&lt;</span><span class="ident">T</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span>(<span class="ident">t</span>: <span class="kw-2">&amp;</span><span class="ident">T</span>) {
    <span class="comment">// ... do something extremely important and interesting ...</span>
}

<span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Arc</span><span class="op">&lt;</span><span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">Pool::new</span>());
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create_with</span>(<span class="op">|</span><span class="ident">item</span><span class="op">|</span> <span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Look up the created `Key`, returning an `OwnedRef`.</span>
<span class="kw">let</span> <span class="ident">pool_ref</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">clone</span>().<span class="ident">get_owned</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">my_struct</span> <span class="op">=</span> <span class="ident">MyStruct</span> {
    <span class="ident">pool_ref</span>,
    <span class="comment">// ...</span>
};

<span class="comment">// We can use `my_struct` anywhere where it is required to have the</span>
<span class="comment">// `&#39;static` lifetime:</span>
<span class="ident">function_requiring_static</span>(<span class="kw-2">&amp;</span><span class="ident">my_struct</span>);</code></pre></div>
<p><code>OwnedRef</code>s may be sent between threads:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">std</span>::{<span class="ident">thread</span>, <span class="ident">sync::Arc</span>};

<span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Arc</span><span class="op">&lt;</span><span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">Pool::new</span>());
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create_with</span>(<span class="op">|</span><span class="ident">item</span><span class="op">|</span> <span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Look up the created `Key`, returning an `OwnedRef`.</span>
<span class="kw">let</span> <span class="ident">value</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">clone</span>().<span class="ident">get_owned</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>();

<span class="ident">thread::spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
    <span class="macro">assert_eq!</span>(<span class="ident">value</span>, <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));
    <span class="comment">// ...</span>
}).<span class="ident">join</span>().<span class="ident">unwrap</span>();</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clear" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#820-833">source</a></span><a href="#method.clear" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.clear" class="fnname">clear</a>(&amp;self, key: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Remove the value using the storage associated with the given key from the pool, returning
<code>true</code> if the value was removed.</p>
<p>This method does <em>not</em> block the current thread until the value can be
cleared. Instead, if another thread is currently accessing that value, this marks it to be
cleared by that thread when it is done accessing that value.</p>
<h5 id="examples-6"><a href="#examples-6">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Pool::new</span>();

<span class="comment">// Check out an item from the pool.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">item</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">item</span>.<span class="ident">key</span>();
<span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;hello world&quot;</span>);
<span class="ident">drop</span>(<span class="ident">item</span>);

<span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">unwrap</span>(), <span class="ident">String::from</span>(<span class="string">&quot;hello world&quot;</span>));

<span class="ident">pool</span>.<span class="ident">clear</span>(<span class="ident">key</span>);
<span class="macro">assert!</span>(<span class="ident">pool</span>.<span class="ident">get</span>(<span class="ident">key</span>).<span class="ident">is_none</span>());</code></pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">pool</span>: <span class="ident">Pool</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Pool::new</span>();

<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">create_with</span>(<span class="op">|</span><span class="ident">item</span><span class="op">|</span> <span class="ident">item</span>.<span class="ident">push_str</span>(<span class="string">&quot;Hello world!&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Clearing a key that doesn&#39;t exist in the `Pool` will return `false`</span>
<span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">clear</span>(<span class="ident">key</span> <span class="op">+</span> <span class="number">69420</span>), <span class="bool-val">false</span>);

<span class="comment">// Clearing a key that does exist returns `true`</span>
<span class="macro">assert!</span>(<span class="ident">pool</span>.<span class="ident">clear</span>(<span class="ident">key</span>));

<span class="comment">// Clearing a key that has previously been cleared will return `false`</span>
<span class="macro">assert_eq!</span>(<span class="ident">pool</span>.<span class="ident">clear</span>(<span class="ident">key</span>), <span class="bool-val">false</span>);</code></pre></div>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Debug" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#858-869">source</a></span><a href="#impl-Debug" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, C&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T, C&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="../trait.Clear.html" title="trait sharded_slab::Clear">Clear</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="../trait.Config.html" title="trait sharded_slab::Config">Config</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#863-868">source</a></span><a href="#method.fmt" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/fmt/trait.Debug.html#tymethod.fmt" class="fnname">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/1.63.0/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/1.63.0/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/1.63.0/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Default" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#849-856">source</a></span><a href="#impl-Default" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../trait.Clear.html" title="trait sharded_slab::Clear">Clear</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.default" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#853-855">source</a></span><a href="#method.default" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html#tymethod.default" class="fnname">default</a>() -&gt; Self</h4></section></summary><div class='docblock'><p>Returns the “default value” for a type. <a href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></details></div></details><section id="impl-Send" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#836-841">source</a></span><a href="#impl-Send" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, C&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T, C&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="../trait.Clear.html" title="trait sharded_slab::Clear">Clear</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="../trait.Config.html" title="trait sharded_slab::Config">Config</a>,&nbsp;</span></h3></section><section id="impl-Sync" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/sharded_slab/pool.rs.html#842-847">source</a></span><a href="#impl-Sync" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, C&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T, C&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + <a class="trait" href="../trait.Clear.html" title="trait sharded_slab::Clear">Clear</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="../trait.Config.html" title="trait sharded_slab::Config">Config</a>,&nbsp;</span></h3></section></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe" class="impl has-srclink"><a href="#impl-RefUnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, C&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T, C&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a>,&nbsp;</span></h3></section><section id="impl-Unpin" class="impl has-srclink"><a href="#impl-Unpin" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, C&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T, C&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,&nbsp;</span></h3></section><section id="impl-UnwindSafe" class="impl has-srclink"><a href="#impl-UnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, C&nbsp;=&nbsp;<a class="struct" href="../struct.DefaultConfig.html" title="struct sharded_slab::DefaultConfig">DefaultConfig</a>&gt; !<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="../struct.Pool.html" title="struct sharded_slab::Pool">Pool</a>&lt;T, C&gt;</h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Any" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/any.rs.html#203-207">source</a></span><a href="#impl-Any" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/any.rs.html#204">source</a></span><a href="#method.type_id" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.63.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.63.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/borrow.rs.html#209-214">source</a></span><a href="#impl-Borrow%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/borrow.rs.html#211">source</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;</a>T</h4></section></summary><div class='docblock'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/borrow.rs.html#218-222">source</a></span><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/borrow.rs.html#219">source</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;mut </a>T</h4></section></summary><div class='docblock'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.63.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#557-562">source</a></span><a href="#impl-From%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#559">source</a></span><a href="#method.from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#541-552">source</a></span><a href="#impl-Into%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#549">source</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.From.html" title="From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#598-607">source</a></span><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#604">source</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#583-592">source</a></span><a href="#impl-TryInto%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/convert/mod.rs.html#589">source</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.63.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="sharded_slab" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0 (4b91a6ea7 2022-08-08)" ></div>
</body></html>